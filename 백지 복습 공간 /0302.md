# Day12

### 멀티 스레드의 동기화 문제

멀티 스레드는 프로세스 안에서 공유되는 하나의 자원을 여럿이 사용하다 보면 동기화 이슈가 생길 수 있음. 예를 들어 A 스레드와 B스레드가 동시에 자원을 가져와서 A는 1을 증가시키고 B도 1을 증가시키면 총 2가 증가해야 하나 1만 증가되버림. 

이를 해결하기 위해선 `동기화` 과정이 필요함. 코드 레벨에서 동기화하는 처리가 필요함

[https://m.blog.naver.com/PostView.nhn?blogId=sol9501&logNo=70104141478&proxyReferer=https:%2F%2Fwww.google.com%2F](https://m.blog.naver.com/PostView.nhn?blogId=sol9501&logNo=70104141478&proxyReferer=https:%2F%2Fwww.google.com%2F)

### 데드락

데드락은 여러 프로세스가 자원을 점유 & 대기하는 게 순환형으로 꼬여서 교착상태에 걸린 것을 의미함.

데드락이 발생하는 조건으로

1. 상호 배제 조건 : 하나의 자원은 하나만이 선점할 수 있음. 딴 친구는 못가져감
2. 점유 대기 조건 : 프로세스는 자원을 점유하면서 다른 자원을 대기할 수 있음.
3. 비선점 : 자원을 점유한 프로세스가 일 끝날 때까지 (혹은 IO 블락) 다른 프로세스가 점유 못함
4. 순환형 : 상대바이 가진 자원을 서로 순환적으로 대기할 수 있음

그러면 이를 어떻게 극복할 수 있을까?

`교착상태 무시` : 거의 발생 안할거라고 생각하고 사용자에게 맡김. 대표적으로 윈도우, 유닉스가 그럼

`교착상태 예방` : 아예 발생 조건 중 한가지를 풀어서 예방하는 것. 그러나 그렇게 되면 자원을 효율적으로 사용하기가 어려워져서 비추

`교착상태 회피` : 자원을 점유,대기할 때마다 교착상태인지 확인하는 회피 알고리즘을 돌림. 오버헤드 커서 비추

`교착상태 탐지 및 복구` : 보통 탐지 & 복구 전략 사용함. 특정 시점(주기적, cpu 임계치, 자원 할당되는 시간 등)마다 교착상태를 탐지하고(그래프 그려서 확인) 만약 탐지되면 프로세스를 우선순위에 맞춰 죽이면서 상태를 복구시킴. 
 대표적으로 mysql도 transaction timeout이 나면 영향력이 작은(변경 row가 적은) 트랜잭션부터 종료시킴

## 파이썬

### 2, 10, 16진수

```python
#이진수
0b001
bin(2) #0b10

#16진수
0xaaa 
hex(10) #0xa

```

### 비트 연산자

### = > 0 조합

조건부로 값을 1씩 뺴거나 증가하고 싶을 때 아래와 같은 패턴을 사용하는 것도 좋은듯

```python
num = 5
hello = 1
bye = 0
num -= hello > 0 #hello는 0보다 크므로 True (1) 반환하므로 num은 4가 됨.
num -= bye > 0 #bye는 0으로 False(0)이므로 num은 4로 변화가 없음.
```

## 알고리즘

최소신장(MST)과 다익스트라 차이

`다익스트라`는 출발 지점과 목표 지점이 정해져있고 그 사이의 최소경로를 구할 때 사용됨. min heap을 사용하여 가중치를 점점 더하면서 제일 낮은 가중치 방향으로 나아감. Greedy함

`MST` 는 그래프에서 순환하지 않으면서 전체를 순회할 수 있는 Spanning Tree 중에서 가장 가중치 합이 낮은 Tree를 의미함(Minimum Spanning Tree). 보통 MST는 시작점과 끝점이 따로 구분되지 않음. 
MST 알고리즘으로 크루스칼, 프림이 있음. 크루스칼은 가중치 기준으로 sort한 후 사이클이 만들어지지 않는다면 순차적으로 간선을 채택하는 방식임. 사이클인지 확인하는 방식으로  Find & Union 방식을 사용한다고 함

### 정규표현식

\s : space

\S : space가 아닌 것

\w : word(숫자,영문)

\W : word가 아닌 것

###