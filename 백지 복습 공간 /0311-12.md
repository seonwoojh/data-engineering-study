# Day19~20

### Subnet

LAN은 동일한 네트워크 ID를 공유하는 장치들의 공간임(보통 공유기로 묶여있는 사설망을 생각하면 됨). 이때 서브넷은 LAN의 영역을 나눠서 크기와 공간을 정해주는 역할을 한다.

보통 255.255.255.0 같은 서브넷 마스크를 호스트의 IP 주소에 비트연산을 시키게 되면 같은 서브넷인지를 확인할 수 있다.  보통 서브넷을 표현할 때 IP주소/24 이런식으로 표현하는데 뒤에 붙은 24는 서브넷 마스크의 축약형으로 1을 앞으로부터 셌을 때의 갯수를 의미한다.  

**보통 서브넷 마스크와 호스트의 IP 주소를 같이 활용해서 네트워크 주소로 사용한다.**

### Docker 의 네트워크

Docker에서 127.0.0.1은 본인 컨테이너 즉 루프백 주소를 의미한다

보통 컨테이너는 별다른 설정이 없으면 같은 브릿지에 연결이 된다. 이 때 컨테이너의 IP주소나 컨테이너 이름으로 통신이 가능해진다.

# 프로젝트 삽질

### Airflow S3 설정

Airflow에서 S3를 사용하려면 S3Hook을 사용한다. 컨테이너로 띄웠을 때 postgres DB를 airflow db로 인식하지 못하는 버그가 있다

### Zeppelin jdbc

제플린은 기본적으로 jvm위에서 돌아가므로 jdbc로 데이터베이스와 통신이 가능함. jdbc driver(jar 파일)를 zeppelin 경로에 추가해줘야 jdbc 통신이 가능함

### Docker compose ping

docker-compose exec 컨테이너A ping 컨테이너B 이렇게 통신이 되는지 테스트가 가능하다. 보통 docker-compose에 적힌 컨테이너는 default 브릿지로 같이 연결된다. 

### Docker Posgres entryPoint

Postgres Container에서 Docker EntryPoint를 실행하려고 할 때 해당 파일을 실행할 권한이 없다고 나온다. 이유는 Docker를 실행시점에서 mount하기 때문인데 Postgres Dockerfile에서 처음부터 Copy를 하면 문제가 해결된다. 

참고 : `privileged` flag를 넣어도 해결되네...?

[https://m.blog.naver.com/PostView.nhn?blogId=alice_k106&logNo=220306793372&proxyReferer=https:%2F%2Fwww.google.com%2F](https://m.blog.naver.com/PostView.nhn?blogId=alice_k106&logNo=220306793372&proxyReferer=https:%2F%2Fwww.google.com%2F)

### Ariflow Local Executor Bug

Local Executor에서 Connection이 제대로 안먹는 문제가 발생함.

또한 초기에 컨테이너 생성시 initdb가 제대로 안되는 문제도 있음.

이거 딥다이브 해봐야할듯?

### Python Class method & Static Method

둘다 클래스 스태틱 메소드 역할을 하는 건 동일한듯. 그러나 static method는 기본적으로 정적 변수에 접근해야 했다면 class method는 클래스 인자를 아예 메소드에서 받을 수 있어 어떤 속성에도 접근이 가능함.

[https://wikidocs.net/21054](https://wikidocs.net/21054)

### Python delta

일반적으로 datetime 모듈에서 datetime, date등의 메소드를 사용해서 시간,날짜를 관리할 수 있다. 그러나 manipulation 하는 과정에서 번거로울 수 있다. 이때 `timedelta`를 사용하면 날짜를 연산하는 과정이 수월해진다. 또한 airflow에서 time interval이나 retry delay를 적을 때 timedelta로 쉽게 표현이 가능하다.

`datetime.now() - timedelta(hours=3)` 

![Day19~20%20b1970b48f09d49d18b5aef6c282219c6/Untitled.png](Day19~20%20b1970b48f09d49d18b5aef6c282219c6/Untitled.png)

# CS

### Gateway와 Router

Router는 주로 LAN과 WAN을 연결하는 역할을 하며 OSI 7계층에서 네트워크 계층까지만 연결을 시킴

반면 Gateway는 OSI 참조모델의 모든 계층을 포함하여 동작하는 네트워크 장비라고 보면 됨.

게이트웨이의 IP 주소는 보통 LAN에 있는 호스트 IP 주소의 끝 부분이 1로 되어있는 경우가 많음.

![Day19~20%20b1970b48f09d49d18b5aef6c282219c6/Untitled%201.png](Day19~20%20b1970b48f09d49d18b5aef6c282219c6/Untitled%201.png)

### 서브넷 마스크

보통 호스트의 네트워크 주소를 표시할 때 IP주소와 서브넷 마스크로 함꼐 표현됨. 이때 서브넷 마스크를 통해 서브넷 영역을 알 수 있고 통신하려는 친구가 같은 서브넷 공간인지 아닌지를 확인할 수 있다.

LAN은 동일한 서브넷으로 묶인 집단이라고 보면 된다(거의 유사한 의미)

### 이더넷

LAN에서 통신하는 네트워크 기술